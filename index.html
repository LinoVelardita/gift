<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Be My Valentine</title>
  <link rel="stylesheet" href="css/valentine.css" />
  <style>
    .page { display: none; }
    .page.active { display: block; }
    .button { cursor: pointer; padding: 10px 20px; margin: 5px; }
  </style>
</head>
<body>

  <!-- Musica -->
  <audio id="bg-music" loop preload="auto">
    <source src="ContentaTu.mp3" type="audio/mpeg" />
  </audio>

<!-- Sezione Index / domanda iniziale -->
  <div id="page-index" class="page active">
    <div id="valentineQuestion"><b>Vuoi essere la mia fidanzatina?</b></div>

    <button class="answerButton" id="yesBtn">Cetto ðŸ’–â€‹</button>
    <button class="answerButton" id="noBtn">No â€‹ðŸ¤¡â€‹</button>
    <br />

    <img src="hammy-brian-hairliners.gif" height="498px" width="150px" alt="cat asking question" class="responsive" />
  </div>

  <!-- Thank You -->
  <div id="page-thankyou" class="page">
    <div id="thankyou" style="font-size: 3em; color:#ff9494; text-align:center;">
        <b>Tiiiiiii</b>
    </div>
    <img height="300px" id="rizz" src="0009.gif" alt="rizzler god" class="responsive" />
    <h1>Spetta! Continua qui :3</h1>
    <button class="answerButton" id="toDateBtn">--- ></button>
  </div>

  <!-- Date -->
  <div id="page-date" class="page">
    <h1 title="choose a date">Quando sei libera, paperedda?</h1>
    <form class="form-group">
      <label>Scegli una data, bedda ca sÃ¬:</label>
      <div>
        <input type="date" id="selectedDate" />
        <button class="answerButton" type="button" id="toFoodBtn">Ok</button>
      </div>
    </form>
  </div>

  <!-- Food -->
  <div id="page-food" class="page">
    <div id="foodquestion"><b>Cosa vorresti mangiare?</b></div>
    <div class="food-selection">
      <div class="food-item">
        <img src="food/pizza.jpg" alt="Pizza" />
        <label><input type="checkbox" name="food" value="Pizza" /> pizza</label>
      </div>
      <div class="food-item">
        <img src="food/argentino.PNG" alt="Argentino" />
        <label><input type="checkbox" name="food" value="Argentino" /> argentino </label>
      </div>
      <div class="food-item">
        <img src="food/almadina.jpeg" alt="almadina" />
        <label><input type="checkbox" name="food" value="almadina" /> almadina</label>
      </div>
      <div class="food-item">
        <img src="food/branzo.jpg" alt="branzo" />
        <label><input type="checkbox" name="food" value="almadina" /> branzo</label>
      </div>
      <div class="food-item">
        <img src="food/georgiano.jpg" alt="georgiano" />
        <label><input type="checkbox" name="food" value="georgiano" /> georgiano</label>
      </div>
      <div class="food-item">
        <img src="food/ghiotteria.jpg" alt="ghiotteria" />
        <label><input type="checkbox" name="food" value="ghiotteria" /> ghiotteria</label>
      </div>
      <div class="food-item">
        <img src="food/indiano.jpg" alt="indiano" />
        <label><input type="checkbox" name="food" value="indiano" /> indiano</label>
      </div>
      <div class="food-item">
        <img src="food/ramen.jpg" alt="ramen" />
        <label><input type="checkbox" name="food" value="ramen" /> ramen</label>
      </div>
      <div class="food-item">
        <img src="food/stelio.jpg" alt="stelio" />
        <label><input type="checkbox" name="food" value="stelio" /> Stelio</label>
      </div>
      <div class="food-item">
        <img src="food/sushi.PNG" alt="sushi" />
        <label><input type="checkbox" name="food" value="sushi" /> sushi</label>
      </div>
    </div>
    <button class="answerButton" id="toDessertBtn">Continua qui</button>
  </div>

  <!-- Dessert -->
  <div id="page-dessert" class="page">
    <div id="dessertquestion">E il dolcino non ce lo metti?</div>
    <div class="dessert-selection">
      <div class="dessert-item">
        <img src="food/rufus.jpg" alt="rufus" />
        <label><input type="checkbox" name="dessert" value="rufus" /> Rufus</label>
      </div>
      <div class="dessert-item">
        <img src="food/misu.jpeg" alt="misu" />
        <label><input type="checkbox" name="dessert" value="misu" /> MisÃ¹</label>
      </div>
            <div class="dessert-item">
        <img src="food/mays.jpg" alt="May's" />
        <label><input type="checkbox" name="dessert" value="May's" /> May's</label>
      </div>
    </div>
    <button class="answerButton" id="toActivitiesBtn">Continua UwU</button>
  </div>

  <!-- Activities -->
  <div id="page-activities" class="page">
    <div id="activityquestion"><b>E dopo che famo?</b></div>
    <div class="activities-selection">
      <div class="activity-item">
        <img src="activities/gambling.jpg" alt="gambling" />
        <label><input type="checkbox" name="activities" value="gambling" /> andiamo a gamblare</label>
      </div>
      <div class="activity-item">
        <img src="activities/cinema.PNG" alt="cinema" />
        <label><input type="checkbox" name="activities" value="cinema" /> cinema ðŸ‘€â€‹</label>
      </div>
      <div class="activity-item">
        <img src="activities/bosetti-yara.gif" alt="bossetti" />
        <label><input type="checkbox" name="activities" value="bossetti" /> Andiamo a liberare Bossettiâ€‹</label>
      </div>
        <div class="activity-item">
        <img src="activities/coccolelle.jpg" alt="coccole" />
        <label><input type="checkbox" name="activities" value="coccole" /> coccolelleâ€‹</label>
      </div>
        <div class="activity-item">
        <img src="activities/stuck_donuts.PNG" alt="orto" />
        <label><input type="checkbox" name="activities" value="orto" /> Stuck donuts on itâ€‹</label>
      </div>
        <div class="activity-item">
        <img src="activities/piagge.jpg" alt="piagge" />
        <label><input type="checkbox" name="activities" value="piagge" /> Passeggiata alle piaggeâ€‹</label>
      </div>
        <div class="activity-item">
        <img src="activities/epstein.PNG" alt="snu snu" />
        <label><input type="checkbox" name="activities" value="snu snu" /> .....</label>
      </div>
        <div class="activity-item">
        <img src="activities/weed.jpeg" alt="weed" />
        <label><input type="checkbox" name="activities" value="weed" /> smokiamlâ€‹</label>
      </div>
    </div>
    <button class="answerButton" id="toLastPageBtn">Un'ultima cosa...</button>
  </div>

<!-- Last Page / Letter -->
<div id="page-lastpage" class="page">
  <div class="content" style="text-align:center; padding: 20px;">
    <h1 id="title" style="color:#ff9494;">
      Grazie per essere la mia fidanzatina ðŸ’–
    </h1>

    <div id="password-section">
      <input 
        type="password" 
        id="passwordInput" 
        placeholder="Inserisci la chiaveg"
        style="padding:10px; border-radius:10px; border:1px solid #ff9494;"
      />
      <button id="unlockBtn" class="answerButton">Sblocca</button>
      <p id="errorMsg" style="color:red;"></p>
    </div>

    <p id="typewriter-text" 
       style="font-size:1.5em; color:#ff9494; white-space:pre-wrap; min-height: 200px;">
    </p>
  </div>
</div>

<script>


const encryptedMessage = [32, 85, 10, 26, 0, 29, 69, 68, 14, 76, 11, 85, 10, 12, 82, 6, 6, 12, 80, 1, 10, 19, 26, 11, 79, 71, 28, 8, 80, 0, 16, 19, 69, 9997, 65134, 42, 40, 79, 21, 6, 4, 90, 14, 9, 73, 80, 0, 16, 82, 0, 26, 18, 69, 31, 10, 82, 21, 11, 67, 8, 30, 8, 0, 12, 14, 82, 8, 0, 14, 0, 30, 14, 28, 84, 19, 65, 11, 9, 7, 84, 12, 12, 29, 69, 73, 65, 0, 77, 79, 82, 84, 69, 0, 71, 76, 73, 0, 69, 66, 120, 75, 71, 79, 14, 67, 65, 92, 90, 75, 14, 73, 66, 71, 118, 10, 16, 0, 0, 0, 65, 68, 4, 29, 6, 29, 69, 84, 6, 2, 29, 69, 69, 1, 29, 22, 12, 65, 77, 12, 79, 28, 27, 11, 0, 20, 3, 73, 68, 4, 66, 22, 10, 31, 4, 0, 4, 1, 27, 14, 12, 65, 21, 9, 71, 14, 75, 76, 92, 75, 71, 79, 14, 67, 65, 92, 90, 111, 0, 71, 76, 73, 0, 69, 66, 92, 75, 71, 79, 97, 1, 3, 29, 6, 4, 0, 14, 2, 29, 65, 11, 22, 29, 69, 29, 8, 0, 12, 2, 29, 84, 17, 65, 9, 24, 0, 83, 22, 11, 31, 0, 27, 19, 73, 0, 0, 82, 0, 23, 79, 23, 28, 0, 83, 22, 11, 31, 12, 26, 8, 77, 12, 2, 23, 26, 17, 69, 71, 24, 8, 78, 17, 13, 92, 75, 71, 79, 0, 77, 79, 82, 84, 69, 0, 109, 66, 71, 14, 75, 39, 82, 21, 6, 8, 0, 14, 6, 82, 0, 0, 78, 2, 26, 6, 0, 4, 66, 22, 12, 27, 21, 73, 77, 12, 26, 17, 75, 14, 73, 66, 71, 0, 69, 66, 82, 69, 99, 65, 0, 77, 79, 33, 17, 12, 0, 11, 13, 73, 77, 12, 3, 82, 6, 8, 18, 69, 25, 27, 19, 88, 69, 0, 71, 76, 99, 0, 69, 66, 82, 22, 12, 8, 0, 28, 26, 23, 24, 69, 80, 8, 31, 29, 79, 69, 1, 26, 0, 73, 21, 73, 77, 12, 7, 24, 9, 65, 75, 76, 26, 69, 8, 18, 30, 12, 10, 4, 77, 8, 1, 6, 17, 69, 69, 20, 5, 26, 84, 0, 12, 22, 10, 69, 65, 0, 77, 79, 120, 84, 69, 0, 71, 63, 12, 73, 69, 11, 30, 69, 4, 8, 79, 77, 3, 23, 0, 17, 73, 9, 3, 69, 0, 69, 66, 82, 111, 73, 65, 0, 77, 28, 23, 29, 69, 81, 18, 9, 5, 0, 21, 13, 1, 17, 6, 65, 83, 24, 79, 17, 1, 12, 0, 19, 5, 73, 65, 6, 1, 19, 22, 10, 8, 0, 28, 26, 19, 26, 1, 79, 71, 31, 12, 78, 17, 11, 82, 1, 0, 65, 78, 2, 1, 82, 18, 4, 82, 4, 9, 5, 65, 69, 18, 27, 156, 69, 65, 0, 77, 79, 120, 84, 69, 0, 71, 63, 12, 73, 69, 11, 30, 69, 4, 8, 79, 77, 28, 29, 26, 11, 79, 75, 76, 73, 0, 69, 104, 82, 69, 73, 65, 81, 24, 10, 30, 84, 7, 69, 11, 0, 0, 83, 22, 11, 31, 10, 73, 18, 79, 10, 1, 29, 84, 6, 72, 2, 76, 0, 78, 6, 13, 31, 12, 7, 2, 73, 12, 79, 2, 6, 10, 80, 21, 5, 6, 0, 4, 14, 82, 23, 0, 18, 86, 8, 8, 30, 29, 10, 12, 71, 9, 73, 67, 13, 7, 82, 69, 73, 65, 42, 77, 79, 82, 84, 20, 85, 6, 2, 13, 79, 69, 4, 27, 11, 0, 18, 67, 8, 79, 6, 29, 69, 67, 15, 5, 12, 68, 12, 66, 17, 10, 4, 4, 0, 5, 14, 27, 84, 3, 65, 19, 24, 6, 0, 4, 66, 4, 12, 31, 4, 82, 8, 79, 1, 17, 11, 90, 6, 66, 73, 0, 69, 66, 120, 69, 73, 65, 0, 77, 79, 82, 84, 69, 0, 71, 76, 73, 0, 69, 66, 82, 69, 73, 65, 0, 77, 79, 82, 84, 69, 0, 71, 76, 73, 0, 111, 66, 82, 54, 12, 8, 0, 28, 26, 23, 24, 69, 80, 8, 31, 29, 79, 69, 1, 26, 0, 73, 16, 85, 12, 1, 22, 27, 69, 84, 14, 76, 31, 69, 1, 13, 82, 11, 6, 15, 0, 0, 6, 82, 2, 12, 69, 9, 9, 73, 86, 10, 5, 30, 12, 8, 65, 68, 4, 79, 28, 29, 0, 78, 19, 9, 69, 0, 69, 104, 82, 69, 26, 4, 0, 3, 0, 28, 84, 1, 73, 71, 24, 6, 82, 11, 3, 0, 0, 73, 0, 0, 14, 14, 1, 21, 73, 0, 20, 24, 12, 78, 1, 7, 0, 8, 0, 65, 65, 77, 3, 23, 0, 17, 79, 71, 9, 73, 68, 10, 16, 31, 12, 27, 4, 14, 67, 65, 82, 84, 111, 0, 71, 58, 6, 71, 9, 11, 29, 69, 29, 14, 82, 3, 14, 0, 17, 69, 65, 71, 15, 8, 83, 4, 66, 31, 12, 8, 79, 0, 77, 101, 82, 84, 69, 0, 71, 76, 73, 0, 69, 66, 82, 69, 73, 65, 0, 77, 79, 82, 84, 69, 0, 71, 76, 73, 0, 69, 66, 82, 69, 73, 65, 42, 30, 31, 23, 6, 10, 0, 4, 4, 12, 0, 20, 23, 23, 22, 29, 0, 0, 30, 0, 0, 4, 23, 69, 20, 13, 73, 84, 12, 66, 19, 7, 11, 8, 65, 77, 28, 6, 6, 4, 80, 23, 13, 29, 79, 69, 23, 28, 69, 26, 14, 82, 31, 6, 1, 27, 111, 0, 71, 76, 73, 0, 69, 66, 82, 69, 73, 65, 0, 77, 79, 82, 84, 69, 42, 71, 76, 42, 79, 11, 66, 6, 16, 29, 21, 79, 77, 3, 85, 21, 8, 79, 21, 9, 73, 67, 13, 7, 82, 21, 6, 18, 83, 2, 79, 22, 21, 23, 84, 14, 64, 73, 0, 111, 11, 30, 69, 29, 20, 79, 77, 35, 27, 26, 10];

function xorDecrypt(encryptedArray, key) {
  let decrypted = "";
  for (let i = 0; i < encryptedArray.length; i++) {
    decrypted += String.fromCharCode(
      encryptedArray[i] ^ key.charCodeAt(i % key.length)
    );
  }
  return decrypted;
}


function startTypewriter(text) {
  const container = document.getElementById("typewriter-text");
  container.textContent = "";
  let index = 0;

  function type() {
    if (index < text.length) {
      container.textContent += text.charAt(index);
      index++;
      setTimeout(type, 50);
    }
  }

  type();
}


document.getElementById("unlockBtn").addEventListener("click", () => {
  const password = document.getElementById("passwordInput").value;
  const errorMsg = document.getElementById("errorMsg");

  if (!password) {
    errorMsg.textContent = "Inserisci la chiave ðŸ’”";
    return;
  }

  try {
    const decryptedText = xorDecrypt(encryptedMessage, password);

    document.getElementById("password-section").style.display = "none";

    startTypewriter(decryptedText);

  } catch (e) {
    errorMsg.textContent = "Nope ðŸ˜¢";
  }
});
  const audio = document.getElementById("bg-music");
  const START_TIME = 26;

  window.addEventListener("load", () => {
    audio.currentTime = START_TIME;
    audio.volume = 0.8;
    audio.play().catch(() => {
      document.body.addEventListener("click", () => audio.play(), {once:true});
    });
  });

  // Funzione per cambiare pagina
  function showPage(pageId) {
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    document.getElementById(pageId).classList.add("active");

    if(pageId === "page-lastpage") {
      startTypewriter(); 
    }

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // Navigazione tra le sezioni
  document.getElementById("yesBtn").addEventListener("click", () => showPage("page-thankyou"));
  document.getElementById("noBtn").addEventListener("click", () => {
    const yesButton = document.getElementById("yesBtn");
    let currentFontSize = parseInt(window.getComputedStyle(yesButton).fontSize);
    yesButton.style.fontSize = (currentFontSize + 10) + "px";
  });

  document.getElementById("toDateBtn").addEventListener("click", () => showPage("page-date"));
  document.getElementById("toFoodBtn").addEventListener("click", () => {
    const selectedDate = document.getElementById("selectedDate").value;
    if (!selectedDate) {
      alert("Devi scegliere una data per continuare >:( ");
      return;
    }

    const date = new Date(selectedDate);
    const minDate = new Date("2026-02-21");
    const maxDate = new Date("2026-02-26");

    if (date < minDate || date > maxDate) {
      alert("AvÃ  fai la seria, scegli una data fattibile Ã².Ã²");
      return;
    }

    showPage("page-food");
  });

  document.getElementById("toDessertBtn").addEventListener("click", () => showPage("page-dessert"));
  document.getElementById("toActivitiesBtn").addEventListener("click", () => showPage("page-activities"));

  // Passaggio a lastpage senza server
  document.getElementById("toLastPageBtn").addEventListener("click", () => {
    const selectedDate = document.getElementById("selectedDate").value;
    const foodSelections = Array.from(document.querySelectorAll('#page-food input[name="food"]:checked')).map(i => i.value);
    const dessertSelections = Array.from(document.querySelectorAll('#page-dessert input[name="dessert"]:checked')).map(i => i.value);
    const activitySelections = Array.from(document.querySelectorAll('#page-activities input[name="activities"]:checked')).map(i => i.value);

    // Solo console log, niente server
    console.log("Data scelta:", selectedDate);
    console.log("Cibo:", foodSelections);
    console.log("Dolci:", dessertSelections);
    console.log("AttivitÃ :", activitySelections);

    showPage("page-lastpage");
  });
</script>

